{"version":3,"sources":["config/apiUrl.js","pages/Login.js","pages/AddArticle.js","pages/ArticleList.js","pages/AdminIndex.js","pages/Main.js","index.js"],"names":["ipUrl","servicePath","checkLogin","getTypeInfo","addArticle","getArticleList","delArticle","getArticleById","Login","props","useState","userName","setUserName","password","setpassword","isLoading","setIsLoading","className","tip","spinning","title","bordered","style","width","id","size","placeholder","prefix","type","color","onChange","e","target","value","block","onClick","message","error","setTimeout","dataProps","axios","method","url","data","withCredentials","then","res","localStorage","setItem","openId","history","push","Option","Select","TextArea","Input","AddArticle","articleId","setArticleId","articleTitle","setArticleTitle","articleContent","setArticleContent","markdownContent","setMarkdownContent","introducemd","setIntroducemd","introducehtml","setIntroducehtml","showDate","setShowDate","typeInfo","setTypeInfo","selectedType","setSelectType","useEffect","tmpId","match","params","renderer","marked","Renderer","setOptions","gfm","pedantic","sanitize","tables","breaks","smartLists","smartypants","removeItem","header","article_content","html","introduce","tmpInt","addTime","typeId","gutter","span","defaultValue","map","item","index","key","Id","typeName","rows","dangerouslySetInnerHTML","__html","type_id","dateText","replace","Date","getTime","console","log","view_count","Math","ceil","random","insertId","isScuccess","success","dataString","confirm","Modal","ArticleList","list","setList","getList","dataSource","renderItem","Item","content","onOk","onCancel","Header","Layout","Content","Footer","Sider","SubMenu","Menu","AdminIndex","collapsed","setCollapsed","minHeight","collapsible","onCollapse","theme","defaultSelectedKeys","mode","background","padding","margin","path","exact","component","textAlign","Main","exaxt","ReactDom","render","document","getElementById"],"mappings":"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","file":"static/js/main.aa1dba74.chunk.js","sourcesContent":["let ipUrl = 'http://127.0.0.1:7001/admin/';\r\n\r\nlet servicePath = {\r\n    checkLogin: ipUrl + 'checkOpenId',  //检查用户名和密码\r\n    getTypeInfo: ipUrl + 'getTypeInfo', //获得文章类别信息\r\n    addArticle: ipUrl + 'addArticle',   //添加文章\r\n    getArticleList: ipUrl + 'getArticleList',   //文章列表\r\n    delArticle: ipUrl + 'delArticle/',   //删除文章\r\n    getArticleById: ipUrl + 'getArticleById/',   //x根据Id获得文章详情\r\n}\r\nexport default servicePath;","import React, { useState } from 'react';\r\nimport 'antd/dist/antd.css';\r\nimport { Card, Input, Icon, Button, Spin, message } from 'antd';\r\nimport '../static/css/Login.css';\r\nimport servicePath from '../config/apiUrl';\r\nimport axios from 'axios'\r\n\r\nfunction Login(props) {\r\n  // eslint-disable-next-line\r\n  const [userName, setUserName] = useState('');\r\n  // eslint-disable-next-line\r\n  const [password, setpassword] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const checkLogin = () => {\r\n    setIsLoading(true);\r\n    if (!userName){\r\n      message.error('用户名不能为空');\r\n      setTimeout(()=>{\r\n        setIsLoading(false);\r\n      },500)\r\n      return false\r\n    } else if (!password){\r\n      message.error('密码不能为空');\r\n      setTimeout(()=>{\r\n        setIsLoading(false);\r\n      },500)\r\n      return false\r\n    }\r\n    let dataProps = {\r\n      'userName': userName,\r\n      'password': password\r\n    }\r\n\r\n    axios({\r\n      method: 'post',\r\n      url: servicePath.checkLogin,\r\n      data: dataProps,\r\n      withCredentials: true\r\n    }).then(\r\n      res=>{\r\n        setIsLoading(false);\r\n        if(res.data.data == '登录成功') {\r\n          localStorage.setItem('openId', res.data.openId);\r\n          props.history.push('/index');\r\n        } else {\r\n          message.error('用户名或密码错误')\r\n        }\r\n      }\r\n    )\r\n  };\r\n\r\n  return (\r\n    <div className=\"login-div\">\r\n      <Spin tip=\"Loading...\" spinning={isLoading}>\r\n        <Card title=\"LJR Blog System\" bordered={true} style={{ width: 400 }}>\r\n          <Input\r\n            id=\"userName\"\r\n            size=\"large\"\r\n            placeholder=\"Enter your userName\"\r\n            prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,.25)' }} />}\r\n            onChange={(e) => { setUserName(e.target.value) }}\r\n          />\r\n          <br/><br/>\r\n          <Input\r\n            id=\"password\"\r\n            size=\"large\"\r\n            placeholder=\"Enter your password\"\r\n            prefix={<Icon type=\"key\" style={{ color: 'rgba(0,0,.25)' }} />}\r\n            onChange={(e) => { setpassword(e.target.value) }}\r\n          />\r\n          <br/><br/>\r\n\r\n          <Button type=\"primary\" size=\"large\" block onClick={checkLogin}>Login in</Button>\r\n        </Card>\r\n      </Spin>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Login\r\n","/* eslint-disable */\r\nimport React, { useState, useEffect } from 'react'\r\nimport marked from 'marked'\r\nimport '../static/css/AddArticle.css'\r\nimport { Row, Col, Input, Select, Button, DatePicker, message } from 'antd'\r\nimport axios from 'axios'\r\nimport servicePath from '../config/apiUrl'\r\nconst { Option } = Select;\r\nconst { TextArea } = Input;\r\n\r\n\r\nfunction AddArticle(props) {\r\n\r\n  const [articleId, setArticleId] = useState(0)  // 文章的ID，如果是0说明是新增加，如果不是0，说明是修改\r\n  const [articleTitle, setArticleTitle] = useState('')   //文章标题\r\n  const [articleContent, setArticleContent] = useState('')  //markdown的编辑内容\r\n  const [markdownContent, setMarkdownContent] = useState('预览内容') //html内容\r\n  const [introducemd, setIntroducemd] = useState()            //简介的markdown内容\r\n  const [introducehtml, setIntroducehtml] = useState('等待编辑') //简介的html内容\r\n  const [showDate, setShowDate] = useState()   //发布日期\r\n  const [updateDate, setUpdateDate] = useState() //修改日志的日期\r\n  const [typeInfo, setTypeInfo] = useState([]) // 文章类别信息\r\n  const [selectedType, setSelectType] = useState('请选择文章类型') //选择的文章类别\r\n\r\n  useEffect(() => {\r\n    getTypeInfo()\r\n    //获得文章ID\r\n    let tmpId = props.match.params.id\r\n    if (tmpId) {\r\n      setArticleId(tmpId)\r\n      getArticleById(tmpId)\r\n    }\r\n  }, [])\r\n\r\n  const renderer = new marked.Renderer();\r\n  marked.setOptions({\r\n    renderer: renderer,\r\n    gfm: true,\r\n    pedantic: false,\r\n    sanitize: false,\r\n    tables: true,\r\n    breaks: false,\r\n    smartLists: true,\r\n    smartypants: false,\r\n  });\r\n\r\n  const changeContent = (e) => {\r\n    setArticleContent(e.target.value);\r\n    let html = marked(e.target.value);\r\n    setMarkdownContent(html);\r\n  }\r\n\r\n  const changeIntroduce = (e) => {\r\n    setIntroducemd(e.target.value);\r\n    let html = marked(e.target.value);\r\n    setIntroducehtml(html);\r\n  }\r\n\r\n  const getTypeInfo = () => {\r\n    axios({\r\n      method: 'get',\r\n      url: servicePath.getTypeInfo,\r\n      withCredentials: true\r\n    }).then(\r\n      res => {\r\n        if (res.data.data == '没有登录') {\r\n          localStorage.removeItem('openId');\r\n          props.history.push('/Login')\r\n        } else {\r\n          setTypeInfo(res.data.data);\r\n        }\r\n      }\r\n    )\r\n  }\r\n\r\n  const selectedTypeHandler = (value) => {\r\n    setSelectType(value);\r\n    // console.log(value);\r\n  }\r\n\r\n  const saveArticle = () => {\r\n    if (!selectedType) {\r\n      message.error('必须选择文章类型');\r\n      return false\r\n    } else if (!articleTitle) {\r\n      message.error('文章标题不能为空');\r\n      return false\r\n    } else if (!articleContent) {\r\n      message.error('文章内容不能为空');\r\n      return false\r\n    } else if (!introducemd) {\r\n      message.error('文章简介不能为空');\r\n      return false\r\n    } else if (!showDate) {\r\n      message.error('发布日期不能为空');\r\n      return false\r\n    }\r\n    // message.success('检验通过');\r\n    let dataProps = {};\r\n    dataProps.type_id = selectedType;\r\n    dataProps.title = articleTitle;\r\n    dataProps.article_content = articleContent;\r\n    dataProps.introduce = introducemd;\r\n    let dateText = showDate.replace('-', '/');\r\n    dataProps.addTime = (new Date(dateText).getTime()) / 1000;\r\n\r\n    if (articleId == 0) {\r\n      console.log('articleId=:' + articleId)\r\n      dataProps.view_count = Math.ceil(Math.random() * 100) + 1000\r\n      axios({\r\n        method: 'post',\r\n        url: servicePath.addArticle,\r\n        data: dataProps,\r\n        withCredentials: true\r\n      }).then(\r\n        res => {\r\n          setArticleId(res.data.insertId)\r\n          if (res.data.isScuccess) {\r\n            message.success('文章保存成功')\r\n          } else {\r\n            message.error('文章保存失败');\r\n          }\r\n\r\n        }\r\n      )\r\n    }\r\n  }\r\n\r\n  const getArticleById = (id) => {\r\n    axios(servicePath.getArticleById + id, {\r\n      withCredentials: true,\r\n      header: { 'Access-Control-Allow-Origin': '*' }\r\n    }).then(\r\n      res => {\r\n        //let articleInfo= res.data.data[0]\r\n        setArticleTitle(res.data.data[0].title)\r\n        setArticleContent(res.data.data[0].article_content)\r\n        let html = marked(res.data.data[0].article_content)\r\n        setMarkdownContent(html)\r\n        setIntroducemd(res.data.data[0].introduce)\r\n        let tmpInt = marked(res.data.data[0].introduce)\r\n        setIntroducehtml(tmpInt)\r\n        setShowDate(res.data.data[0].addTime)\r\n        setSelectType(res.data.data[0].typeId)\r\n\r\n      }\r\n    )\r\n  }\r\n\r\n\r\n  return (\r\n    <div>\r\n      <Row gutter={5}>\r\n        <Col span={18}>\r\n          <Row gutter={10}>\r\n            <Col span={20}>\r\n              <Input\r\n                value={articleTitle}\r\n                placeholder=\"博客标题\"\r\n                size=\"large\"\r\n                onChange={(e) => { setArticleTitle(e.target.value) }}\r\n              />\r\n            </Col>\r\n            <Col span={4}>\r\n              &nbsp;\r\n              <Select defaultValue={selectedType} size=\"large\" onChange={selectedTypeHandler}>\r\n                {\r\n                  typeInfo.map((item, index) => {\r\n                    return (<Option key={index} value={item.Id}>{item.typeName}</Option>)\r\n                  })\r\n                }\r\n              </Select>\r\n            </Col>\r\n          </Row>\r\n          <br />\r\n          <Row gutter={10}>\r\n            <Col span={12}>\r\n              <TextArea\r\n                className=\"markdown-content\"\r\n                rows={35}\r\n                placeholder=\"文章内容\"\r\n                value={articleContent}\r\n                onChange={changeContent}\r\n              />\r\n            </Col>\r\n            <Col span={12}>\r\n              <div className=\"show-html\"\r\n                dangerouslySetInnerHTML={{ __html: markdownContent }}>\r\n              </div>\r\n            </Col>\r\n          </Row>\r\n        </Col>\r\n        <Col span={6}>\r\n          <Row>\r\n            <Col span={24}>\r\n              <Button size=\"large\">暂存文章</Button>&nbsp;&nbsp;&nbsp;&nbsp;\r\n              <Button type=\"primary\" size=\"large\" onClick={saveArticle}>发布文章</Button>\r\n              <br />\r\n            </Col>\r\n            <Col span={24}>\r\n              <br />\r\n              <TextArea\r\n                rows={4}\r\n                placeholder=\"文章简介\"\r\n                value={introducemd}\r\n                onChange={changeIntroduce}\r\n              ></TextArea>\r\n              <br /><br />\r\n              <div className=\"introduce-html\"\r\n                dangerouslySetInnerHTML={{ __html: introducehtml }}>\r\n              </div>\r\n            </Col>\r\n            <Col span={12}>\r\n              <div className=\"date-select\">\r\n                <DatePicker\r\n                  onChange={(data, dataString) => { setShowDate(dataString) }}\r\n                  placeholder=\"发布日期\"\r\n                  size=\"large\"\r\n                />\r\n              </div>\r\n            </Col>\r\n            <Col span={12}>\r\n              <div className=\"date-select\">\r\n                <DatePicker\r\n                  placeholder=\"修改日期\"\r\n                  size=\"large\"\r\n                />\r\n              </div>\r\n            </Col>\r\n          </Row>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default AddArticle","import React, { useState, useEffect } from 'react';\r\nimport { List, Row, Col, Modal, Message, Button, message } from 'antd';\r\nimport axios from 'axios';\r\nimport servicePath from '../config/apiUrl.js';\r\nimport '../static/css/ArticleList.css'\r\nconst { confirm } = Modal;\r\n\r\nfunction ArticleList(props) {\r\n  const [list, setList] = useState([]);\r\n\r\n  useEffect(() => {\r\n    getList()\r\n  }, [])\r\n\r\n  const getList = () => {\r\n    axios({\r\n      method: 'get',\r\n      url: servicePath.getArticleList,\r\n      withCredentials: true\r\n    }).then(\r\n      (res) => {\r\n        setList(res.data.list)\r\n      }\r\n    )\r\n  }\r\n  //删除文章的方法\r\n  const delArticle = (id) => {\r\n    confirm({\r\n      title: '确定要删除这篇文章吗？',\r\n      content: '如果你点击OK键，文章将永远被删除，无法被恢复。',\r\n      onOk() {\r\n        axios(servicePath.delArticle + id, { withCredentials: true }).then(\r\n          res => {\r\n            message.success('文章删除成功');\r\n            getList();\r\n          }\r\n        )\r\n      },\r\n      onCancel() {\r\n        message.success('取消删除文章');\r\n      }\r\n    })\r\n  }\r\n\r\n  //修改文章\r\n  const updateArticle = (id, checked) => {\r\n\r\n    props.history.push('/index/add/' + id)\r\n\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <List\r\n        header={\r\n          <Row className=\"list-div\">\r\n            <Col span={8}>\r\n              <b>标题</b>\r\n            </Col>\r\n            <Col span={4}>\r\n              <b>类别</b>\r\n            </Col>\r\n            <Col span={4}>\r\n              <b>发布时间</b>\r\n            </Col>\r\n            <Col span={4}>\r\n              <b>浏览量</b>\r\n            </Col>\r\n            <Col span={4}>\r\n              <b>操作</b>\r\n            </Col>\r\n          </Row>\r\n        }\r\n        bordered\r\n        dataSource={list}\r\n        renderItem={item => (\r\n          <List.Item>\r\n            <Row className=\"list-div\">\r\n              <Col span={8}>\r\n                {item.title}\r\n              </Col>\r\n              <Col span={4}>\r\n                {item.typeName}\r\n              </Col>\r\n              <Col span={4}>\r\n                {item.addTime}\r\n              </Col>\r\n              <Col span={4}>\r\n                {item.view_count}\r\n              </Col>\r\n              <Col span={4}>\r\n                <Button type=\"primary\" onClick={() => { updateArticle(item.id) }}>修改</Button>\r\n                <Button onClick={() => { delArticle(item.id) }}>删除</Button>\r\n              </Col>\r\n            </Row>\r\n          </List.Item>\r\n        )}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ArticleList\r\n","import React, { useState } from 'react';\r\nimport { Layout, Menu, Breadcrumb, Icon } from 'antd';\r\nimport '../static/css/AdminIndex.css';\r\nimport { Route } from 'react-router-dom';\r\nimport AddArticle from './AddArticle';\r\nimport ArticleList from './ArticleList';\r\n\r\n\r\nconst { Header, Content, Footer, Sider } = Layout;\r\nconst { SubMenu } = Menu;\r\n\r\nfunction AdminIndex(props) {\r\n  const [collapsed, setCollapsed] = useState(false);\r\n\r\n  const onCollapse = collapsed => {\r\n    setCollapsed(collapsed)\r\n  };\r\n\r\n  const handleClickArticle = e=> {\r\n    if(e.key == 'addArticle') {\r\n      props.history.push('/index/add');\r\n    }else{\r\n      props.history.push('/index/list');\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Layout style={{ minHeight: '100vh' }}>\r\n      <Sider collapsible collapsed={collapsed} onCollapse={onCollapse}>\r\n        <div className=\"logo\" />\r\n        <Menu theme=\"dark\" defaultSelectedKeys={['1']} mode=\"inline\">\r\n          <Menu.Item key=\"1\">\r\n            <Icon type=\"pie-chart\" />\r\n            <span>工作台</span>\r\n          </Menu.Item>\r\n          <Menu.Item key=\"2\">\r\n            <Icon type=\"desktop\" />\r\n            <span>添加文章</span>\r\n          </Menu.Item>\r\n          <SubMenu\r\n            key=\"sub1\"\r\n            onClick={handleClickArticle}\r\n            title={\r\n              <span>\r\n                <Icon type=\"user\" />\r\n                <span>文章管理</span>\r\n              </span>\r\n            }\r\n          >\r\n            <Menu.Item key=\"addArticle\">添加文章</Menu.Item>\r\n            <Menu.Item key=\"articleList\">文章列表</Menu.Item>\r\n          </SubMenu>\r\n          <Menu.Item key=\"9\">\r\n            <Icon type=\"file\" />\r\n            <span>留言管理</span>\r\n          </Menu.Item>\r\n        </Menu>\r\n      </Sider>\r\n      <Layout>\r\n        <Header style={{ background: '#fff', padding: 0 }} />\r\n        <Content style={{ margin: '0 16px' }}>\r\n          <Breadcrumb style={{ margin: '16px 0' }}>\r\n            <Breadcrumb.Item>后台管理系统</Breadcrumb.Item>\r\n            <Breadcrumb.Item>工作台</Breadcrumb.Item>\r\n          </Breadcrumb>\r\n          <div style={{ padding: 24, background: '#fff', minHeight: 360 }}>\r\n            <div>\r\n              <Route path=\"/index/\" exact component={AddArticle} />\r\n              <Route path=\"/index/add/\" exact component={AddArticle} />\r\n              <Route path=\"/index/list/\" exact component={ArticleList} />\r\n              <Route path=\"/index/add/:id\" exact component={AddArticle} />\r\n            </div>\r\n          </div>\r\n        </Content>\r\n        <Footer style={{ textAlign: 'center' }}>Ant Design ©2018 Created by Ant UED</Footer>\r\n      </Layout>\r\n    </Layout>\r\n  );\r\n}\r\n\r\nexport default AdminIndex","import React from 'react';\r\nimport {BrowserRouter as Router, Route} from 'react-router-dom'\r\nimport Login from './Login'\r\nimport AdminIndex from './AdminIndex'\r\n\r\nfunction Main() {\r\n  return (\r\n    <Router>\r\n      <Route path=\"/login/\" exaxt component={Login} />\r\n      <Route path=\"/index/\" exaxt component={AdminIndex} />\r\n    </Router>\r\n  )\r\n}\r\n\r\nexport default Main","import React from 'react';\r\nimport ReactDom from 'react-dom';\r\nimport Main from '../src/pages/Main';\r\n\r\nReactDom.render(<Main />, document.getElementById('root'));\r\n"],"sourceRoot":""}